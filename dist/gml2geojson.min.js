/*!
 * gml2geojson v0.0.1
 * LICENSE : MIT
 * */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).gml2geojson=e.gml2geojson||{})}(this,(function(e){"use strict";const n=new DOMParser,t=["geometryproperty","shape"];function o(e,n){const t=e.children||[];let o,r=[];for(let e=0,s=t.length;e<s;e++){const s=t[e];if(c(h(s))){if(s.children[0]&&(o=s.children[0].nodeName.split("gml:")[1]||"",!o))return;if(s.children[0].children[0]){const e=h(s.children[0].children[0]);let t=s.children;if(l(e)&&(t=i(t)),!t.length)return;for(let e=0,i=t.length;e<i;e++){let i=f(t[e].children,n);p(o)||(i=i[0]),r.push(i)}1===r.length&&(r=r[0])}}}if(o&&r.length)return{type:o,coordinates:r}}function r(e){const n=e.children||[],t={};let o=!1;for(let e=0,r=n.length;e<r;e++){const r=n[e],i=h(r);if(c(i)){i.indexOf("shape")>-1&&(o=!0);continue}const l=i.split(":")[1];if(!l)continue;const f=r.textContent||"";t[l]=f}return t.isShape=o,t}function i(e){const n=[];for(let t=0,o=e.length;t<o;t++){const o=e[t].children;for(let e=0,t=o.length;e<t;e++)n.push(o[e].children[0])}return n}function l(e){return e.indexOf("member")>-1}function c(e){for(let n=0,o=t.length;n<o;n++)if(e.indexOf(t[n])>-1)return!0;return!1}function f(e,n){const t=[];for(let o=0,r=e.length;o<r;o++){const r=d(e[o]);t.push(s(r.textContent,n))}return t}function s(e,n){if(!e)return;const t=e.split(" ");let[o,r]=t;if(o.indexOf(",")>-1){const e=[];for(let n=0,o=t.length;n<o;n++){const o=t[n];let[r,i]=o.split(",");r=u(r),i=u(i),e.push([r,i])}return e.length>1?e:e[0]}return o=u(o),r=u(r),n?[r,o]:[o,r]}function u(e){for(;e.indexOf(" ")>-1;)e=e.replace(" ","");return parseFloat(e)}function d(e){let n=h(e);for(;-1===n.indexOf(":coordinates")&&-1===n.indexOf(":pos");)n=h(e=e.children[0]);return e}function h(e){return(e.nodeName||"").toLocaleLowerCase()}function p(e){return e.indexOf("Polygon")>-1}e.parseGML=function(e){const t={type:"FeatureCollection",features:[]},i=n.parseFromString(e,"text/xml").children[0];if(!i||!i.nodeName||-1===h(i).indexOf("featurecollection"))return t;let l=0;const c=[];for(;i.children.item(l);){const e=i.children.item(l);h(e).indexOf("featuremember")>-1&&e.children[0]&&c.push(e.children[0]),l++}for(let e=0,n=c.length;e<n;e++){const n=c[e],i=r(n),l=o(n,i.isShape);if(!l||!i)continue;const f={type:"Feature",geometry:l,properties:i};t.features.push(f)}return t},Object.defineProperty(e,"__esModule",{value:!0}),"undefined"!=typeof console&&console.log("gml2geojson v0.0.1")}));
